# =========================
# URL МАРШРУТЫ ПРИЛОЖЕНИЯ ADS
# Файл: board/ads/urls.py
#
# Здесь описаны ВСЕ маршруты,
# связанные с объявлениями.
# =========================


# path() — связывает URL и функцию-вьюху
from django.urls import path

# Импортируем вьюхи из текущего приложения
from . import views


# =========================
# СПИСОК URL ЭТОГО ПРИЛОЖЕНИЯ
# =========================
urlpatterns = [

    # =====================================================
    # /ads/
    # ЛЕНТА ОБЪЯВЛЕНИЙ
    # =====================================================
    # Показывает список всех объявлений
    # views.ads_list
    path(
        "",
        views.ads_list,
        name="ads_list"
    ),


    # =====================================================
    # /ads/create/
    # СОЗДАНИЕ ОБЪЯВЛЕНИЯ
    # =====================================================
    # Доступ только авторизованным
    # views.create_ad
    path(
        "create/",
        views.create_ad,
        name="create_ad"
    ),


    # =====================================================
    # /ads/<id>/edit/
    # РЕДАКТИРОВАНИЕ ОБЪЯВЛЕНИЯ
    # =====================================================
    # ВАЖНО:
    # Этот маршрут ОБЯЗАТЕЛЬНО должен идти
    # ДО "<int:ad_id>/"
    #
    # Иначе Django может попытаться
    # воспринять слово "edit" как id.
    #
    # views.edit_ad
    path(
        "<int:ad_id>/edit/",
        views.edit_ad,
        name="edit_ad"
    ),


    # =====================================================
    # /ads/<id>/delete/
    # УДАЛЕНИЕ ОБЪЯВЛЕНИЯ
    # =====================================================
    # Удаление только через POST
    # Только автор может удалить
    #
    # views.delete_ad
    path(
        "<int:ad_id>/delete/",
        views.delete_ad,
        name="delete_ad"
    ),


    # =====================================================
    # /ads/<id>/
    # СТРАНИЦА ОДНОГО ОБЪЯВЛЕНИЯ
    # =====================================================
    # ВСЕГДА ставим этот маршрут ПОСЛЕДНИМ,
    # потому что он самый общий.
    #
    # Если поставить выше —
    # он "перехватит" edit/ и delete/
    #
    # views.ad_detail
    path(
        "<int:ad_id>/",
        views.ad_detail,
        name="ad_detail"
    ),
]
