{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ -->
    <meta charset="UTF-8">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <title>–õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</title>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—â–∏–π CSS —Å–∞–π—Ç–∞ -->
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<!-- =========================
     –®–ê–ü–ö–ê –°–ê–ô–¢–ê
     ========================= -->
<header class="header" style="display:flex; align-items:center; justify-content:space-between; padding:10px 20px;">

    <!-- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –õ–û–ì–û -->
    <div class="logo">
        <a href="/" style="text-decoration:none;color:#000;">
            –î–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
        </a>
    </div>

    <!-- –¶–ï–ù–¢–† ‚Äî –ü–û–ò–°–ö (–ø–æ–∫–∞ –±–µ–∑ –ª–æ–≥–∏–∫–∏) -->
    <div style="flex:1; text-align:center;">
        <form method="get" action="#" style="display:inline-block; width:60%;">
            <input type="text"
                   name="q"
                   placeholder="–ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π..."
                   style="
                        width:70%;
                        padding:8px 12px;
                        border-radius:6px;
                        border:1px solid #ccc;
                   ">

            <button type="submit"
                    style="
                        padding:8px 14px;
                        border:none;
                        background:#c62828;
                        color:white;
                        border-radius:6px;
                        cursor:pointer;
                   ">
                –ù–∞–π—Ç–∏
            </button>
        </form>
    </div>

    <!-- –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –ú–ï–ù–Æ -->
    <nav style="display:flex; align-items:center; gap:14px;">

        {% if user.is_authenticated %}

            <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
            <a href="{% url 'create_ad' %}"
               style="
                    background:#2e7d32;
                    color:white;
                    padding:8px 12px;
                    border-radius:6px;
                    text-decoration:none;
               ">
                + –û–±—ä—è–≤–ª–µ–Ω–∏–µ
            </a>

            <span>{{ user.username }}</span>

            <form method="post" action="{% url 'logout' %}" style="display:inline;">
                {% csrf_token %}
                <button class="link-btn">–í—ã–π—Ç–∏</button>
            </form>

        {% else %}
            <a href="{% url 'login' %}">–í—Ö–æ–¥</a>
            <a href="{% url 'signup' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}

    </nav>

</header>


<!-- =========================
     –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢
     ========================= -->
<main class="hero">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <h1>–õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h1>
    <p>–ù–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É</p>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
    <div style="margin-bottom: 20px;">
        <a class="main-btn" href="{% url 'create_ad' %}">
            –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
        </a>
    </div>

    <!-- =========================
         –°–ü–ò–°–û–ö –û–ë–™–Ø–í–õ–ï–ù–ò–ô
         ========================= -->
    {% if ads %}

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ -->
        <div style="text-align:left; display:grid; gap:14px;">

            {% for ad in ads %}
                <!-- =========================
                     –û–î–ù–û –û–ë–™–Ø–í–õ–ï–ù–ò–ï
                     ========================= -->
                <div style="border:1px solid #ffeded; padding:14px; border-radius:8px;">

                    <!-- =========================
                         –ó–ê–ì–û–õ–û–í–û–ö (–°–°–´–õ–ö–ê –ù–ê –î–ï–¢–ê–õ–¨–ù–£–Æ –°–¢–†–ê–ù–ò–¶–£)
                         ========================= -->
                    <!-- –í–ê–ñ–ù–û:
                         url 'ad_detail' ad.id
                         –≤–µ–¥—ë—Ç –Ω–∞ /ads/ID/
                    -->
                    <div style="font-weight:bold; font-size:18px; margin-bottom:6px;">
                        <a href="{% url 'ad_detail' ad.id %}"
                           style="color:#c62828; text-decoration:none;">
                            {{ ad.title }}
                        </a>
                    </div>

                    <!-- =========================
                         –¶–ï–ù–ê (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
                         ========================= -->
                    {% if ad.price %}
                        <div style="margin-bottom:6px;">
                            <b>–¶–µ–Ω–∞:</b> {{ ad.price }}
                        </div>
                    {% endif %}

                    <!-- =========================
                         –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï
                         ========================= -->
                    {% if ad.description %}
                        <div style="color:#000; margin-bottom:8px;">
                            {{ ad.description|truncatechars:150 }}
                        </div>
                    {% endif %}

                    <!-- =========================
                         –ê–í–¢–û–†
                         ========================= -->
                    <div style="margin-top:10px; font-size:13px; color:#444;">
                        –ê–≤—Ç–æ—Ä: {{ ad.author.username }}
                    </div>

                </div>
            {% endfor %}

        </div>

    {% else %}
        <!-- –ï—Å–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç -->
        <p>–ü–æ–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç. –ë—É–¥—å –ø–µ—Ä–≤—ã–º üôÇ</p>
    {% endif %}

</main>

</body>
</html>
