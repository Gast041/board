{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ -->
    <meta charset="UTF-8">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <title>–õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</title>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—â–∏–π CSS —Å–∞–π—Ç–∞ -->
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<!-- =========================
     –®–ê–ü–ö–ê –°–ê–ô–¢–ê
     ========================= -->
<header class="header header-bar">

    <!-- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –õ–û–ì–û -->
    <div class="logo">
        <a href="/" class="logo-link">
            52prime.ru
        </a>
    </div>

    <!-- –¶–ï–ù–¢–† ‚Äî –ü–û–ò–°–ö (–£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢ –ß–ï–†–ï–ó ?q=) -->
    <div class="header-center">
        <form method="get" action="{% url 'ads_list' %}" class="search-form">

            <!-- value="{{ q }}" ‚Äî —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –ø–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞ -->
            <input
                type="text"
                name="q"
                placeholder="–ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π..."
                value="{{ q }}"
                class="search-input"
            >

            <button type="submit" class="search-btn">
                –ù–∞–π—Ç–∏
            </button>

        </form>
    </div>

    <!-- –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –ú–ï–ù–Æ -->
    <nav class="header-right">

        {% if user.is_authenticated %}

            <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
            <a class="main-btn" href="{% url 'create_ad' %}">
                + –û–±—ä—è–≤–ª–µ–Ω–∏–µ
            </a>

            <span class="user-name">{{ user.username }}</span>

            <form method="post" action="{% url 'logout' %}" class="inline-form">
                {% csrf_token %}
                <button class="link-btn">–í—ã–π—Ç–∏</button>
            </form>

        {% else %}
            <a href="{% url 'login' %}">–í—Ö–æ–¥</a>
            <a href="{% url 'signup' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}

    </nav>

</header>


<!-- =========================
     –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢
     ========================= -->
<main class="hero">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <h1>–õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h1>
    <p>–ù–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É</p>

    {% if q %}
        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞: —á—Ç–æ —Å–µ–π—á–∞—Å –∏—â–µ–º -->
        <p class="search-hint">
            –ü–æ–∏—Å–∫: <b>{{ q }}</b>
            <a href="{% url 'ads_list' %}" class="search-reset">—Å–±—Ä–æ—Å–∏—Ç—å</a>
        </p>
    {% endif %}

    <!-- =========================
         –°–ü–ò–°–û–ö –û–ë–™–Ø–í–õ–ï–ù–ò–ô
         ========================= -->
    {% if ads %}

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ -->
        <div class="ads-grid">

            {% for ad in ads %}
                <!-- =========================
                     –û–î–ù–û –û–ë–™–Ø–í–õ–ï–ù–ò–ï
                     ========================= -->
                <div class="ad-card">

                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é -->
                    <div class="ad-title">
                        <a href="{% url 'ad_detail' ad.id %}" class="ad-title-link">
                            {{ ad.title }}
                        </a>
                    </div>

                    <!-- –¶–µ–Ω–∞ -->
                    {% if ad.price %}
                        <div class="ad-price">
                            <b>–¶–µ–Ω–∞:</b> {{ ad.price }}
                        </div>
                    {% endif %}

                    <!-- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                    {% if ad.description %}
                        <div class="ad-desc">
                            {{ ad.description|truncatechars:150 }}
                        </div>
                    {% endif %}

                    <!-- –ê–≤—Ç–æ—Ä -->
                    <div class="ad-author">
                        –ê–≤—Ç–æ—Ä: {{ ad.author.username }}
                    </div>

                </div>
            {% endfor %}

        </div>

    {% else %}
        <p>–ü–æ–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç. –ë—É–¥—å –ø–µ—Ä–≤—ã–º üôÇ</p>
    {% endif %}

</main>

</body>
</html>
