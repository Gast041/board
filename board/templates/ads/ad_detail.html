{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- =========================
         СЛУЖЕБНЫЕ НАСТРОЙКИ СТРАНИЦЫ
         ========================= -->
    <meta charset="UTF-8">

    <!-- Заголовок вкладки браузера -->
    <title>{{ ad.title }}</title>

    <!-- Подключение общего CSS -->
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <!-- Адаптивность -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<!-- =========================
     ШАПКА САЙТА
     ========================= -->
<header class="header">

    <!-- Логотип + ссылка на главную -->
    <div class="logo">
        <a href="/" style="text-decoration:none;color:#000;">
            Доска объявлений
        </a>
    </div>

    <!-- Меню справа -->
    <nav>
        {% if user.is_authenticated %}
            <span>{{ user.username }}</span>

            <!-- Кнопка выхода -->
            <form method="post" action="{% url 'logout' %}" style="display:inline;">
                {% csrf_token %}
                <button class="link-btn">Выйти</button>
            </form>
        {% else %}
            <a href="{% url 'login' %}">Вход</a>
            <a href="{% url 'signup' %}">Регистрация</a>
        {% endif %}
    </nav>

</header>


<!-- =========================
     ОСНОВНОЙ БЛОК
     ========================= -->
<main class="hero">

    <!-- Заголовок объявления -->
    <h1>{{ ad.title }}</h1>

    <!-- Цена -->
    {% if ad.price %}
        <div style="margin-bottom:15px; font-size:18px;">
            <b>Цена:</b> {{ ad.price }}
        </div>
    {% endif %}

    <!-- Описание -->
    <div style="margin-bottom:20px;">
        {{ ad.description|linebreaksbr }}
    </div>

    <!-- Автор -->
    <div style="font-size:14px; color:#444;">
        Автор: {{ ad.author.username }}
    </div>


    <!-- =========================
         УДАЛЕНИЕ ОБЪЯВЛЕНИЯ
         ========================= -->
    <!-- КНОПКА ПОКАЗЫВАЕТСЯ ТОЛЬКО АВТОРУ -->
    {% if user.is_authenticated and user == ad.author %}
        <div style="margin-top:30px;">

            <!-- ВАЖНО:
                 Удаление должно быть POST-запросом
                 чтобы нельзя было удалить по простой ссылке
            -->
            <form method="post" action="{% url 'delete_ad' ad.id %}">
                {% csrf_token %}

                <button type="submit"
                        style="
                            background:#c62828;
                            color:white;
                            border:none;
                            padding:10px 16px;
                            border-radius:6px;
                            cursor:pointer;
                        ">
                    Удалить объявление
                </button>
            </form>

        </div>
    {% endif %}


    <!-- =========================
         КНОПКА НАЗАД
         ========================= -->
    <div style="margin-top:30px;">
        <a href="/ads/" class="main-btn">
            Назад к ленте
        </a>
    </div>

</main>

</body>
</html>
